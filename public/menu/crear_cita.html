<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agendar cita - Mynat</title>
  <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css" />
  <link rel="stylesheet" href="/css/styles.css" />
  <script type="module" src="https://unpkg.com/html-input-rut"></script>
  <script src="../loadNav.js" defer></script>
</head>
<body>
  <div id="nav-placeholder"></div>
  <div class="hero-body">
    <div class="container has-text-centered">
      <div class="column is-4 is-offset-4">
        <div class="box">
          <p class="subtitle is-4">Agendar cita</p>
          <form id="agendarCitaForm">
            <div class="field">
              <label class="label">Rut del cliente</label>
              <p class="control has-icons-left">
                <input class="input is-medium" is="input-rut" type="text" id="Rut" placeholder="Rut del cliente" maxlength="12" required/>
                  <span class="icon is-small is-left">
                    <i class="fas fa-address-card"></i>
                  </span>
              </p>
            </div>
            <div class="field">
              <label class="label">Técnico</label>
              <div class="control">
                  <div class="select">
                      <select id="tecnico" name="tecnico">
                          <option value="cualquiera">Cualquiera</option>
                      </select>
                  </div>
              </div>
          </div>
            <div class="field">
              <label class="label">Fecha</label>
              <div class="control">
                <input class="input" type="date" id="fecha" min="<?php echo date('Y-m-d'); ?>" required>
              </div>
            </div>
            <div class="field">
              <label class="label">Comentario (opcional)</label>
              <div class="control">
                <textarea class="textarea" id="comentario" placeholder="Ingrese algún comentario"></textarea>
              </div>
            </div>
            <div class="field">
              <div class="control">
                <button type="submit" class="button is-primary">Agendar Cita</button>
              </div>
            </div>
          </form>        
        </div>
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            const fechaInput = document.getElementById('fecha');
            function validarFecha(event) {
              const fechaSeleccionada = new Date(event.target.value);
              const diaSeleccionado = fechaSeleccionada.getDay();
              const fechaActual = new Date();
              const diaActual = fechaActual.getDay();
              if (fechaSeleccionada < fechaActual || (diaSeleccionado === 5 || diaSeleccionado === 6)) {
                event.target.value = '';
                alert('Seleccione una fecha desde hoy en adelante y que sea un día hábil (Lunes a Viernes)');
              }
            }
            fechaInput.addEventListener('change', validarFecha);
          });
        </script>
      </div>
    </div>  
  </div>
</body>
</html>